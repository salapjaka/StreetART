<div id="navbar" class="nav justify-content">

  <a href="/login" class="btn"> Login</a>
  <a href="/signup" class="btn"> Signup</a>
  <a href="/auth/facebook" class="btn"><span class=""></span> Facebook</a>
  {{!-- <a href="/auth/twitter" class="btn btn-info"><span class="fa fa-twitter"></span> Twitter</a>
        <a href="/auth/google" class="btn btn-danger"><span class="fa fa-google-plus"></span> Google+</a> --}}
</div>
<div style="padding:0 0 20px;font-size:30px">
  <div class="background container">
    <div class="centered">WALLS</div>
    <div class="lower">
      <h2>Discover the world of street art</h2>
    </div>
  </div>
  

  <div id="map"></div>
</div>
<div >

</div>
<div class="fb-share-button facebook" data-href="https://floating-escarpment-49099.herokuapp.com/" data-layout="button" data-size="large"><a target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Ffloating-escarpment-49099.herokuapp.com%2F&amp;src=sdkpreparse" class="fb-xfbml-parse-ignore">Share</a></div><script>
  window.onscroll = function () { scrollFunction() };

  function scrollFunction() {
    if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
      document.getElementById("navbar").style.top = "0";
    } else {
      document.getElementById("navbar").style.top = "-50px";
    }
  }

  let arts = JSON.parse('{{{json arts}}}')
  console.log(arts)
  window.onload = () => {
    console.log('we need markers')

    const ironhackMiami = {
      lat: 25.765787699999997,
      lng: -80.19577989999999
    };

    const map = new google.maps.Map(
      document.getElementById('map'),
      {
        zoom: 5,
        center: ironhackMiami
      });

    let center = {
      lat: ironhackMiami.lat,
      lng: ironhackMiami.lng
    };


    const markers = []
    arts.forEach(art => {
 //     <img src="${art.photoPath}" /><br>

      //var myLatLng = {lat: -25.363, lng: 131.044};
      var myLatLng = { lat: art.latitude, lng: art.longitude }
      var contentString = `
    <div class = "thumbnail" id="content" style="background-image: url(${art.photoPath}) ">
      ${art.artName} by 
      ${art.artistName.nickName}
    </div>
    `;


      var infowindow = new google.maps.InfoWindow({
        content: contentString
      });
      let marker = new google.maps.Marker({
        position: myLatLng,
        map: map,
        title: 'click me!',
      });

    marker.addListener('click', function () {
        infowindow.open(map, marker);  
  })
      console.log(markers)
    let firstTime = true
    marker.addListener('click', function() {
      if(firstTime){
        map.setZoom(15);
        firstTime = false;
      } else {
        map.setZoom(5);
        firstTime = true;
      }
      map.setCenter(marker.getPosition());
    });
  
});

    google.maps.event.addListener(map, 'click', function (event) {
      alert("Latitude: " + event.latLng.lat() + " " + ", longitude: " + event.latLng.lng());
    });
  }

</script>

{{!-- 
  const map = new google.maps.Map(
    document.getElementById('map'),
    {
      zoom: 5,
      center: ironhackMiami
    });

 let center = {
    lat: ironhackMiami.lat,
    lng: ironhackMiami.lng
  }; 
  const markers = []
  arts.forEach(art=>{

    //var myLatLng = {lat: -25.363, lng: 131.044};
    var myLatLng = {lat: art.latitude, lng: art.longitude }
    var iconBase = 'https://maps.google.com/mapfiles/kml/shapes/';
    
    let marker = new google.maps.Marker({
          position: myLatLng,
          map: map,
          icon: iconBase + 'parking_lot_maps.png',
          
          title: 'Hello World!'
    });
    markers.push(marker)
}) --}}